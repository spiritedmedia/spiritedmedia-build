machine:
  php:
    version: 7.0.4
  node:
    version: 6.4.0

dependencies:
  override:
    - npm install -g bower
    - npm install -g grunt-cli
    - gem install bundler
    - ./bin/install.sh

test:
  override:
    - grunt build
    # - grunt tests

## Customize deployment commands
deployment:
  release:
        tag: /v[0-9]+(\.[0-9]+)*/
        owner: spiritedmedia
        commands:
            # Inspired by http://frankiesardo.github.io/posts/2015-04-19-automate-everything-with-circleci.html
          - git clone git@github.com:spiritedmedia/systems.git ~/spiritedmedia && . ~/spiritedmedia/deployment/circleci/circleci-deploy.sh

  staging:
      branch: staging
      owner: spiritedmedia
      commands:
          # Inspired by http://frankiesardo.github.io/posts/2015-04-19-automate-everything-with-circleci.html
          - git clone git@github.com:spiritedmedia/systems.git ~/spiritedmedia && . ~/spiritedmedia/deployment/circleci/circleci-deploy.sh
