!function(){"use strict";function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){var a=!1;if(function(e){try{var t=window[e],a="__storage_test__";return t.setItem(a,a),t.removeItem(a),!0}catch(e){return!1}}("localStorage")&&(a=!0),null!=t&&("object"===c(t)&&(t=JSON.stringify(t)),a?localStorage.setItem(e,t):o(e,t,30)),void 0===t){if(a)var r=localStorage.getItem(e);else r=function(e){for(var t=e+"=",a=document.cookie.split(";"),r=0,n=a.length;r<n;r++){for(var o=a[r];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return null}(e);try{var n=JSON.parse(r)}catch(e){n=r}return n}function o(e,t,a){var r=new Date;r.setTime(r.getTime()+24*a*60*60*1e3);var n="; expires="+r.toGMTString();document.cookie=e+"="+t+n+"; path=/"}null===t&&(a?localStorage.removeItem(e):o(e,"",-1))}var a,u=function(){function e(){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.storageKey="contactData",this.version=3,$(document).on("ready",function(){var e=localStorageCookie("subscriberData");e&&"data"in e&&(localStorageCookie("subscriberData",""),localStorageCookie(a.storageKey,e));var t=localStorageCookie(a.storageKey);t&&"data"in t&&a.triggerEvent("ready",t)}),$(".js-signup-email-form").on("pedFormSubmission:success",function(e,t){return a.listenForEmailSignups(e,t)}),this.maybeRefresh()}var t,a,r;return t=e,(a=[{key:"maybeRefresh",value:function(){var e=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",r={};return t||(t=location.search),t.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,t,a){r[t]=a}),e?r[e]:r}("mc_eid"),t=localStorageCookie(this.storageKey);if(t&&"data"in t){var a=!1;if("mc_id"in t.data&&(a=t.data.mc_id),"version"in t&&t.version!=this.version)return this.fetchData(a),!0;if("updated"in t){var r=(new Date).getTime()/1e3,n=new Date(t.updated).getTime()/1e3;if((n+=1209600)<=r)return this.fetchData(a),!0}this.triggerEvent("ready",t)}else if(e)return this.fetchData(e),!0;return!1}},{key:"fetchData",value:function(e){var t=this,a=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],r={action:"get_contact_data",contactID:e},n=this.storageKey;$.post(PedVars.ajaxurl,r,function(e){e.success&&(localStorageCookie(n,e.data),a&&t.triggerEvent("ready",e.data))})}},{key:"listenForEmailSignups",value:function(e,t){"emailAddress"in t&&this.fetchData(t.emailAddress,!1)}},{key:"triggerEvent",value:function(e,t){var a="pedContact:"+e;$(document).trigger(a,[t])}}])&&n(t.prototype,a),r&&n(t,r),e}();(a=jQuery).fn.serializeFormJSON=function(){var e={},t=this.serializeArray();return a.each(t,function(){e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},jQuery(document).ready(function(r){var t=new u,e=s(t.storageKey),n=r("#status");function o(){var e=s(t.storageKey);r("#raw-data-output").text(JSON.stringify(e,null,4))}if(e&&"data"in e)for(var i in n.text("Importing values from cookie"),o(),e.data){var a=e.data[i];switch(c(a)){case"boolean":a=a?"true":"false"}r("#"+i).val(a).change()}r("#target-audiences").on("change",function(){var e=r(this).val(),t={newsletter_subscriber:!0,current_member:!1,donate_365:!1};switch(e){case"unidentified":t.newsletter_subscriber=!1;break;case"contact":break;case"donor":t.donate_365=!0;break;case"member":t.current_member=!0}for(i in t){var a=String(t[i]);r("#"+i).val(a)}r(".the-form input").trigger("change"),n.html("Set cookie to <code>"+e+"</code> target audience")}),r(".the-form").on("change","input, select",function(){var e=r(this),a=e.parents("form").serializeFormJSON();r.each(a,function(e,t){""!==t&&(isNaN(1*t)?"false"!==t&&"true"!==t||(a[e]="true"==t):a[e]=1*t)}),s(t.storageKey,{version:3,updated:(new Date).toISOString(),data:a}),n.html("Updated cookie: <code>"+e.attr("name")+"</code> set to <code>"+e.val()+"</code>"),o()})})}();