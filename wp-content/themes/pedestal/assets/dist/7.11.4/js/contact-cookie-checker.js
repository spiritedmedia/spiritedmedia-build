!function(){"use strict";function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var e=function(){function t(){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.storageKey="contactData",this.version=3,$(document).on("ready",function(){var t=localStorageCookie("subscriberData");t&&"data"in t&&(localStorageCookie("subscriberData",""),localStorageCookie(a.storageKey,t));var e=localStorageCookie(a.storageKey);e&&"data"in e&&a.triggerEvent("ready",e)}),$(".js-signup-email-form").on("pedFormSubmission:success",function(t,e){return a.listenForEmailSignups(t,e)}),this.maybeRefresh()}var e,a,n;return e=t,(a=[{key:"maybeRefresh",value:function(){var t=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n={};return e||(e=location.search),e.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,e,a){n[e]=a}),t?n[t]:n}("mc_eid"),e=localStorageCookie(this.storageKey);if(e&&"data"in e){var a=!1;if("mc_id"in e.data&&(a=e.data.mc_id),"version"in e&&e.version!=this.version)return this.fetchData(a),!0;if("updated"in e){var n=(new Date).getTime()/1e3,r=new Date(e.updated).getTime()/1e3;if((r+=1209600)<=n)return this.fetchData(a),!0}this.triggerEvent("ready",e)}else if(t)return this.fetchData(t),!0;return!1}},{key:"fetchData",value:function(t){var e=this,a=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n={action:"get_contact_data",contactID:t},r=this.storageKey;$.post(PedVars.ajaxurl,n,function(t){t.success&&(localStorageCookie(r,t.data),a&&e.triggerEvent("ready",t.data))})}},{key:"listenForEmailSignups",value:function(t,e){"emailAddress"in e&&this.fetchData(e.emailAddress,!1)}},{key:"triggerEvent",value:function(t,e){var a="pedContact:"+t;$(document).trigger(a,[e])}}])&&r(e.prototype,a),n&&r(e,n),t}();jQuery(document).ready(function(i){var t=new e,c=contactExpectedMergeFields.data;!function(t,e){var a=!1;if(function(t){try{var e=window[t],a="__storage_test__";return e.setItem(a,a),e.removeItem(a),!0}catch(t){return!1}}("localStorage")&&(a=!0),null!=e&&("object"===s(e)&&(e=JSON.stringify(e)),a?localStorage.setItem(t,e):o(t,e,30)),void 0===e){if(a)var n=localStorage.getItem(t);else n=function(t){for(var e=t+"=",a=document.cookie.split(";"),n=0,r=a.length;n<r;n++){for(var o=a[n];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(e))return o.substring(e.length,o.length)}return null}(t);try{var r=JSON.parse(n)}catch(t){r=n}return}function o(t,e,a){var n=new Date;n.setTime(n.getTime()+24*a*60*60*1e3);var r="; expires="+n.toGMTString();document.cookie=t+"="+e+r+"; path=/"}null===e&&(a?localStorage.removeItem(t):o(t,"",-1))}(t.storageKey,null),t.fetchData(contactEmail),i(this).on("pedContact:ready",function(t,e){i("#output").html(JSON.stringify(e.data,null,4));var a={pass:[],fail:[]};for(var n in c){var r=e.data[n],o=c[n];r!==o?a.fail.push({key:n,expected:o,actualValue:r}):a.pass.push(n)}a.fail.length<=0?i("#pass").show():(i("#fail").show(),i("#fail-output").html(JSON.stringify(a.fail,null,4))),i.get("?cleanup",function(){})})})}();