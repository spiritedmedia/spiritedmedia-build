var _slicedToArray=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(t){r=!0,a=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};!function(f){var t={init:function(){for(var t in this.clusterMap={stories:"pedestal_story",topics:"pedestal_topic",people:"pedestal_person",organizations:"pedestal_org",places:"pedestal_place",localities:"pedestal_locality"},this.connections={entities_to_clusters:{from:"entities",to:["stories","topics","people","organizations","places","localities"]},stories_to_clusters:{from:"stories",to:["topics","people","organizations","places","localities"]}},this.siteURL=window.location.protocol+"//"+window.location.hostname,this.connections)this.manageConnectionsMetaboxes(this.connections[t],t);setTimeout(function(){f(".p2p-toggle-tabs a").click().hide()},1500),this.toggleEmbedFieldsByURL(),this.handleEventUI(),this.makeHierarchicalTermsFilterable(),this.setupSummaryButtons(),this.disableDraggingDistributionMetaboxes()},extractDomain:function(t){var e;return(e=-1<t.indexOf("://")?t.split("/")[2]:t.split("/")[0]).replace("www.",""),e=e.split(":")[0]},manageConnectionsMetaboxes:function(t,e){for(var i,n=t.to,r=n.length-1;0<=r;r--){i=n[r];var a=t.from+"_to_"+i,o=f("[data-p2p_type="+a+"].p2p-box"),s=f("#fm-pedestal_"+e+"_connections-0-"+i+"-0-tab .fm-group-inner");0!==o.length&&0!==s.length&&(s.append(o.parent().html()),o.closest(".postbox").remove())}},toggleEmbedFieldsByURL:function(){var u={instagram:{domainSubstring:"instagr",selector:"#fm_meta_box_daily_insta_date"},twitter:{domainSubstring:"twitter.com",selector:"#fm_meta_box_embed_options"}};f(".post-type-pedestal_embed #fm-embed_url-0").on("blur",function(t){var e=f(t.target).val(),i=!0,n=!1,r=void 0;try{for(var a,o=Object.entries(u)[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){var s=a.value,l=_slicedToArray(s,2),c=l[0],p=l[1],d=f(p.selector);e.includes(p.domainSubstring)?d.show():d.hide(),"instagram"==c&&fm.datepicker.add_datepicker(t)}}catch(t){n=!0,r=t}finally{try{!i&&o.return&&o.return()}finally{if(n)throw r}}}).blur()},handleEventUI:function(){f("#fm-event_details-0-all_day-0").on("change",function(){f(".fm-start_time-wrapper .fm-datepicker-time-wrapper, .fm-end_time-wrapper .fm-datepicker-time-wrapper").toggle(!this.checked)}).change();f("#fm-event_details-0-start_time-0, #fm-event_details-0-end_time-0").on("change keyup copy paste cut",function(){var t=f(this);0===t.val().length&&t.closest(".fm-item").find(".fm-datepicker-time").val("")})},makeHierarchicalTermsFilterable:function(){var t=f(".categorydiv");if(!(t.length<1)){jQuery.expr[":"].contains=function(t,e,i){var n=(t.textContent||t.innerText||"").toUpperCase(),r=i[3].toUpperCase();return 0<=n.indexOf(r)};var e="categorydiv-filter",i="."+e,r=f('<input type="search" />').addClass(e).css("width","100%");t.each(function(t,e){var i=f(e);if(!(i.find(".categorychecklist li").length<10)){var n=i.parent().siblings(".hndle").text();r.attr("placeholder","Filter "+n),i.prepend(r)}}),f("#post").on("keyup",i,function(){var t=f(this),e=t.parent().find(".categorychecklist li");t.val().length<2?e.show():e.hide().find(".selectit:contains("+t.val()+")").each(function(t,e){f(e).parent().show()})}).on("keydown",i,function(t){if(13==t.keyCode)return t.preventDefault(),!1}).on("click",i,function(){var t=f(this);setTimeout(function(){t.trigger("keyup")},100,t)})}},setupSummaryButtons:function(){var n=f("#fm-homepage_settings-0-summary-0");n.length<1||(f(".js-pedestal-summary-copy-subhead").on("click",function(){var t=f("textarea#excerpt").val();""!==t&&n.val(t)}),f(".js-pedestal-summary-copy-first-graf").on("click",function(){var t=tinyMCE.get("content").getContent(),e=f(t).filter("p").not(function(){return this.innerHTML.match(/\[([^\s\]]+)([^\]]+)?\]([^[]*)?(\[\/(\S+?)\])?/)});if(!(e.length<=0)){var i=e.first().html();n.val(i)}}))},disableDraggingDistributionMetaboxes:function(){var t=f("#distribution-sortables");t.sortable({disabled:!0}),t.find(".postbox .hndle").css("cursor","pointer")}};f(document).ready(function(){t.init()})}(jQuery);