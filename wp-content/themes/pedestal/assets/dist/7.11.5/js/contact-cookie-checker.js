!function(){"use strict";function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var a=0;a<e.length;a++){var o=e[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var e=function(){function c(){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),this.storageKey="contactData",this.version=4,$(".js-signup-email-form").on("pedFormSubmission:success",function(t,e){"emailAddress"in e&&a.fetchData(e.emailAddress,!1)});var t=localStorageCookie("subscriberData");t&&"data"in t&&(localStorageCookie("subscriberData",""),localStorageCookie(this.storageKey,t));var e=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",o={};return e||(e=location.search),e.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,e,a){o[e]=a}),t?o[t]:o}("mc_eid"),o=localStorageCookie(this.storageKey);if(!(o&&"object"==s(o)&&"data"in o))return this.deleteData(),void this.fetchData(e);if(!("mc_id"in o.data&&"version"in o&&"updated"in o))return this.deleteData(),void this.fetchData(e);var n=o.data.mc_id;if(e&&(n=e),o.version!=this.version)return this.deleteData(),void this.fetchData(n);var r=(new Date).getTime()/1e3,i=new Date(o.updated).getTime()/1e3;if((i+=1209600)<=r)return this.deleteData(),void this.fetchData(n);$(document).on("ready",function(){return a.triggerEvent("ready",o)})}var t,e,a;return t=c,(e=[{key:"deleteData",value:function(){localStorageCookie(this.storageKey,"")}},{key:"fetchData",value:function(t){var e=this,a=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(t){var o=this.storageKey,n={action:"get_contact_data",contactID:t};$.post(PedVars.ajaxurl,n,function(t){t.success&&(localStorageCookie(o,t.data),a&&e.triggerEvent("ready",t.data))})}}},{key:"triggerEvent",value:function(t,e){var a="pedContact:"+t;$(document).trigger(a,[e])}}])&&o(t.prototype,e),a&&o(t,a),c}();!function(t,e){var a=!1;if(function(t){try{var e=window[t],a="__storage_test__";return e.setItem(a,a),e.removeItem(a),!0}catch(t){return!1}}("localStorage")&&(a=!0),null!=e&&("object"===s(e)&&(e=JSON.stringify(e)),a?localStorage.setItem(t,e):r(t,e,30)),void 0===e){if(a)var o=localStorage.getItem(t);else o=function(t){for(var e=t+"=",a=document.cookie.split(";"),o=0,n=a.length;o<n;o++){for(var r=a[o];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(e))return r.substring(e.length,r.length)}return null}(t);try{var n=JSON.parse(o)}catch(t){n=o}return}function r(t,e,a){var o=new Date;o.setTime(o.getTime()+24*a*60*60*1e3);var n="; expires="+o.toGMTString();document.cookie=t+"="+e+n+"; path=/"}null===e&&(a?localStorage.removeItem(t):r(t,"",-1))}("contactData",""),jQuery(document).ready(function(i){var t=new e,c=contactExpectedMergeFields.data;t.fetchData(contactEmail),i(document).on("pedContact:ready",function(t,e){i("#output").html(JSON.stringify(e.data,null,4));var a={pass:[],fail:[]};for(var o in c)if("since"!=o){var n=e.data[o],r=c[o];n!==r?a.fail.push({key:o,expected:r,actualValue:n}):a.pass.push(o)}else a.pass.push(o);a.fail.length<=0?i("#pass").show():(i("#fail").show(),i("#fail-output").html(JSON.stringify(a.fail,null,4))),i.get("?cleanup",function(){})})})}();