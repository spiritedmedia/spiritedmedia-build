!function(){"use strict";function n(t,e){for(var n,i=t.to,r=i.length-1;0<=r;r--){n=i[r];var o=t.from+"_to_"+n,a=$("[data-p2p_type="+o+"].p2p-box"),s=$("#fm-pedestal_"+e+"_connections-0-"+n+"-0-tab .fm-group-inner");0!==a.length&&0!==s.length&&(s.append(a.parent().html()),a.closest(".postbox").remove())}}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var l={instagram:{domainSubstring:"instagr",selector:"#fm_meta_box_daily_insta_date"},twitter:{domainSubstring:"twitter.com",selector:"#fm_meta_box_embed_options"}},p=function(t){for(var e=$(t.target).val(),n=Object.entries(l),i=0;i<n.length;i++){var r=c(n[i],2),o=r[0],a=r[1],s=$(a.selector);e.includes(a.domainSubstring)?s.show():s.hide(),"instagram"==o&&fm.datepicker.add_datepicker(t)}};var d,t,u=function(t){var e=$("#title");e.val().length<1&&($('\n      <div class="notice notice-error">\n        <p>A headline is required!</p>\n      </div>\n    ').insertAfter(".wp-header-end"),e.focus(),t.preventDefault())};d=jQuery,t={init:function(){var i,r,o,a,s,t=this;for(var e in this.clusterMap={stories:"pedestal_story",topics:"pedestal_topic",people:"pedestal_person",organizations:"pedestal_org",places:"pedestal_place",localities:"pedestal_locality"},this.connections={entities_to_clusters:{from:"entities",to:["stories","topics","people","organizations","places","localities"]},stories_to_clusters:{from:"stories",to:["topics","people","organizations","places","localities"]}},this.siteURL=window.location.protocol+"//"+window.location.hostname,this.connections)n(this.connections[e],e);setTimeout(function(){d(".p2p-toggle-tabs a").click().hide()},1500),d(".post-type-pedestal_embed #fm-embed_url-0").on("blur",p).blur(),d(document).on("click","#publish",u),function(){var t=$(".categorydiv");if(!(t.length<1)){jQuery.expr[":"].contains=function(t,e,n){var i=(t.textContent||t.innerText||"").toUpperCase(),r=n[3].toUpperCase();return 0<=i.indexOf(r)};var e="categorydiv-filter",n="."+e,r=$('<input type="search" />').addClass(e).css("width","100%");t.each(function(t,e){var n=$(e);if(!(n.find(".categorychecklist li").length<10)){var i=n.parent().siblings(".hndle").text();r.attr("placeholder","Filter "+i),n.prepend(r)}}),$("#post").on("keyup",n,function(){var t=$(this),e=t.parent().find(".categorychecklist li");t.val().length<2?e.show():e.hide().find(".selectit:contains("+t.val()+")").each(function(t,e){$(e).parent().show()})}).on("keydown",n,function(t){if(13==t.keyCode)return t.preventDefault(),!1}).on("click",n,function(){var t=$(this);setTimeout(function(){t.trigger("keyup")},100,t)})}}(),$("#fm-event_details-0-all_day-0").on("change",function(){var t="".concat(".fm-start_time-wrapper .fm-datepicker-time-wrapper",", ").concat(".fm-end_time-wrapper .fm-datepicker-time-wrapper");$(t).toggle(!this.checked)}).change(),$("#fm-event_details-0-start_time-0, #fm-event_details-0-end_time-0").on("change keyup copy paste cut",function(){var t=$(this);0===t.val().length&&t.closest(".fm-item").find(".fm-datepicker-time").val("")}),(i=$("#fm-homepage_settings-0-summary-0")).length<1||($(".js-pedestal-summary-copy-subhead").on("click",function(){var t=$("textarea#excerpt").val();""!==t&&i.val(t)}),$(".js-pedestal-summary-copy-first-graf").on("click",function(){var t=tinyMCE.get("content").getContent(),e=$(t).filter("p").not(function(){return this.innerHTML.match(/\[([^\s\]]+)([^\]]+)?\]([^[]*)?(\[\/(\S+?)\])?/)});if(!(e.length<=0)){var n=e.first().html();i.val(n)}})),d(window).on("resize",(r=function(){t.responsiveIframes()},o=300,function(){var t=this,e=arguments,n=function(){return r.apply(t,e)},i=a&&!s;clearTimeout(s),s=setTimeout(n,o),i&&n()})),this.responsiveIframes(),this.disableDraggingDistributionMetaboxes()},disableDraggingDistributionMetaboxes:function(){var t=d("#distribution-sortables");t.sortable({disabled:!0}),t.find(".postbox .hndle").css("cursor","pointer")},responsiveIframes:function(){d(".pedestal-responsive, .js-responsive-iframe").each(function(t,e){return function(t){var e=$(t),n=e.parent().width();window.self!==window.top&&(n=parent.innerWidth);var i=e.data("true-height")||360,r=n/(e.data("true-width")||640)*i;e.css("height",r+"px").css("width",n+"px")}(e)})}},d(document).ready(function(){t.init()})}();