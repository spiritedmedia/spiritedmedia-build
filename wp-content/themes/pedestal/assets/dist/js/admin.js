"use strict";!function(e){var t={init:function(){this.clusterMap={stories:"pedestal_story",topics:"pedestal_topic",people:"pedestal_person",organizations:"pedestal_org",places:"pedestal_place",localities:"pedestal_locality"},this.connections={entities_to_clusters:{from:"entities",to:["stories","topics","people","organizations","places","localities"]},stories_to_clusters:{from:"stories",to:["topics","people","organizations","places","localities"]}},this.siteURL=window.location.protocol+"//"+window.location.hostname;for(var t in this.connections)this.manageConnectionsMetaboxes(this.connections[t],t);setTimeout(function(){e(".p2p-toggle-tabs a").click().hide()},1500),this.reorderExcerptBox(),this.toggleIOTDEmbedField(),this.makeHierarchicalTermsFilterable()},extractDomain:function(e){var t;return(t=e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0]).replace("www.",""),t=t.split(":")[0]},manageConnectionsMetaboxes:function(t,i){for(var o,n=t.to,r=n.length-1;r>=0;r--){o=n[r];var a=t.from+"_to_"+o,s=e("[data-p2p_type="+a+"].p2p-box"),c=e("#fm-pedestal_"+i+"_connections-0-"+o+"-0-tab .fm-group-inner");0!==s.length&&0!==c.length&&(c.append(s.parent().html()),s.closest(".postbox").remove())}},reorderExcerptBox:function(){var t=e("#postexcerpt");t.find("p").hide(),t.insertAfter("#titlediv").css("margin-top",20),e("#title").one("focus",function(){e(this).off(".editor-focus")})},toggleIOTDEmbedField:function(){e(".post-type-pedestal_embed #fm-embed_url-0").on("blur",function(t){var i=e(t.target),o=e("#fm_meta_box_daily_insta_date");-1!==i.val().indexOf("instagr")?o.show():o.hide(),fm.datepicker.add_datepicker(t)}).blur()},makeHierarchicalTermsFilterable:function(){var t=e(".categorydiv");if(!(t.length<1)){jQuery.expr[":"].contains=function(e,t,i){var o=(e.textContent||e.innerText||"").toUpperCase(),n=i[3].toUpperCase();return o.indexOf(n)>=0};var i=e('<input type="search" />').addClass("categorydiv-filter").css("width","100%");t.each(function(t,o){var n=e(o);if(!(n.find(".categorychecklist li").length<10)){var r=n.parent().siblings(".hndle").text();i.attr("placeholder","Filter "+r),n.prepend(i)}}),e("#post").on("keyup",".categorydiv-filter",function(){var t=e(this),i=t.parent().find(".categorychecklist li");t.val().length<2?i.show():i.hide().find(".selectit:contains("+t.val()+")").each(function(t,i){e(i).parent().show()})}).on("keydown",".categorydiv-filter",function(e){if(13==e.keyCode)return e.preventDefault(),!1}).on("click",".categorydiv-filter",function(){var t=e(this);setTimeout(function(){t.trigger("keyup")},100,t)})}}};e(document).ready(function(){t.init()})}(jQuery);