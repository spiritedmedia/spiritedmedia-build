// ==========================================================================
// Pedestal // Components // SEARCH
// ==========================================================================


$search-input-padding: $half-spacing-unit;
$search-filter-link-padding: 5px;


.c-search {

  &__form {
    position: relative;

    .is-active-search & {
      margin-bottom: $base-spacing-unit;
    }

    .is-loading & {
      opacity: $loading-default-opacity;
    }
  }


  &__input {}


  &__icon {
    padding: $search-input-padding;
    position: absolute;
    top: $base-spacing-unit / 4;
    color: $grey-25;
    background-color: transparent;

    &:hover,
    &:focus {
      background-color: transparent;
      color: $black;
    }

    &--search {
      .o-icon {
        width: icon-width-get( search ) * 1.5;
      }
    }

    &--close {
      right: 0;
      display: none;

      // scss-lint:disable SelectorFormat
      .js & {
        display: block;
      }

      .o-icon {
        width: icon-width-get( close ) * 1.5;
      }
    }
  }


  &__tools {
    display: none;
    position: relative;

    .is-loading & {
      opacity: $loading-default-opacity;
    }

    .is-active-search & {
      display: block;
    }

    &__item {
      display: inline-block;
    }
  }


  &__total-results {
    padding: $search-filter-link-padding;

    &__count {
      font-weight: 600;
    }
  }


  &--sitewide {
    // scss-lint:disable SelectorFormat
    background-color: $grey-95;

    .js &,
    .is-search-open & {
      position: absolute;
      top: 0;
      width: 100%;
      z-index: 1; // So it displays under the header

      .c-spinner {
        margin-top: 0;
        margin-bottom: 0;
        top: 0;
      }
    }

    // Account for the WP admin bar height
    .admin-bar.is-search-open &,
    .js .admin-bar & {
      top: $wp-admin-bar-height-mobile;

      @media #{$wp-admin-bar-breakpoint} {
        top: $wp-admin-bar-height-desktop;
      }
    }
  }


  &__filters {
    position: absolute;
    right: 0;

    &__label {
      margin-left: $base-spacing-unit;
      margin-bottom: 0;
      padding: $search-filter-link-padding;
      display: inline-block;
      position: relative;

      &.is-active {
        font-weight: 600;
      }
    }

    &__radio {
      // scss-lint:disable SelectorFormat

      .js & {
        opacity: 0;
        position: absolute;
        top: 0;
        right: 0;
        left: 0;
      }

      &[type="radio"] {
        margin: 0;
      }
    }
  }


  .c-spinner {
    margin-top: $half-spacing-unit;
    margin-bottom: $half-spacing-unit;
    position: absolute;

    .is-loading & {
      position: absolute;
      z-index: 1;
    }
  }
}


// We style the search field down here because we need to use a qualifying
// element selector
//
// scss-lint:disable SelectorFormat QualifyingElement
input.c-search__field {
  @include stdbd(
    $side: 'bottom',
    $color: $grey-80,
    $neut: true
  );

  box-shadow: none;
  height: auto;
  padding: $search-input-padding;
  padding-left: $base-spacing-unit * 2.5;
  font-size: $h4-font-size;
  color: $grey-25;

  &,
  &:focus {
    background: transparent;
  }
}
// scss-lint:enable SelectorFormat QualifyingElement
