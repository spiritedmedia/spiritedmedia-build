// ==========================================================================
// Pedestal // Components // STREAM
// ==========================================================================


// @TODO
// scss-lint:disable SelectorFormat


.c-stream {
  @include clearfix;
  text-align: left;

  &.is-empty {
    text-align: center;
    font-size: $h3-font-size;
  }

  .is-loading &,
  &.is-loading {
    opacity: $loading-default-opacity;
  }
}


  .c-stream__header {
    margin-top: c-stream-property-get( item-spacing );

    @media #{$small-only} {
      text-align: center;
    }
  }

    .c-stream__header__item {
      display: inline-block;
    }


    .c-stream__header__rule {
      margin-top: 0;
    }


    /*h1*/.c-stream__title {
      font-size: $h4-font-size;
      font-weight: normal;
      text-transform: uppercase;
      font-style: italic;
      color: $grey-mid;
    }


    .c-stream__paged {
      .c-stream__header & {
        text-align: left;
        margin-left: c-stream-property-get( header-paged-m-l );
      }
    }


  .c-stream__footer {
    .c-pagination {
      .c-panel & {
        position: relative;
        margin-right: -( $c-panel-padding );
        margin-left: -( $c-panel-padding );
        bottom: -( $c-panel-padding );
      }
    }
  }





//
// Stream // Items
// ==========================================================================


.c-stream__items {}


  .c-stream__item {
    @include clearfix;
    position: relative;
    margin-top: c-stream-property-get( item-spacing );

    &:first-child {
      margin-top: 0;
    }

    &:last-child {
      margin-bottom: c-stream-property-get( item-spacing );
    }

    &.has-title-bar {
      &:first-child {
        margin-top: halve( map-get-strict( $c-title-bar-settings, 'm-t' ) );
      }
    }
  }


    .c-stream__item__body {}

    .stream-preview-image,
    .c-stream__item__img {

      @media #{$medium-up} {
        width: c-stream-property-get( item-img-thumbnail-w );
        height: auto;
      }

      .email-body & {
        margin-bottom: $base-spacing-unit;
      }

      .rail & {
        width: auto;
      }

    }


    .c-stream__item__title {}





//
// Stream Variations
// ==========================================================================


/**
 * Stream with items in separate panels
 *
 * Extends `.c-stream`.
 */

.c-stream--isolated {


  // scss-lint:disable Indentation SelectorFormat


  [data-post-type="article"],
  [data-post-type="whosnext"] {

    @media #{$medium-up} {

      .c-stream__item__body {
        position: relative;
        z-index: $z-entity-body;
      }

      .stream-preview-image,
      .c-stream__item__img {
        margin: 0;
        overflow: hidden;
        float: none;
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        opacity: 0.15;
        z-index: $z-stream-item-img;

        img {
          position: absolute;
          bottom: -20%;
          width: 100%;
          height: auto;
        }
      }

    }

  } // end article / whosnext

}





/**
 * Stream with items separated by a pedal rule
 *
 * Extends `.c-stream`.
 */

.c-stream--pedalized {

  // Remove pedal rule from first stream item if header is present
  .c-stream__header {
    // scss-lint:disable NestingDepth
    + .c-stream__items {
      .c-stream__item {
        &:first-child {
          border-top: 0;

          &::before {
            width: 0;
          }
        }
      }
    }
  }

  .o-rule {
    padding-top: 0;
  }

  .stream-preview-image,
  .c-stream__item__img {
    padding-top: $c-panel-padding;
  }

  .c-stream__item__body {
    padding-top: halve( $c-panel-padding );
  }

}





/**
 * Stream with items in singular panel separated by standard borders
 *
 * Extends `.c-stream`.
 */

.c-stream--ladder {
  .c-stream__item {
    @include stdbd( 'top' );
    min-height: 0;
    margin-top: 0;
    margin-bottom: 0;
    padding-bottom: $c-panel-padding;

    &:first-of-type {
      border: 0;
    }
  }
}





/**
 * Stream with even top and bottom spacing and increased horizontal padding
 *
 * Extends `.c-stream`.
 */

.c-stream--inset {

  .c-stream__item {
    margin-top: 0;
    margin-bottom: 0;
    padding-top: c-stream-property-get( even-spacing-sm );
    padding-bottom: c-stream-property-get( even-spacing-sm );

    @media #{$medium-up} {
      padding-top: c-stream-property-get( even-spacing-lg );
      padding-bottom: c-stream-property-get( even-spacing-lg );
    }
  }

  .c-stream__item__inner {
    @media #{$medium-up} {
      margin-left: c-stream-property-get( inset-spacing );
      margin-right: c-stream-property-get( inset-spacing );
    }
  }

}





/**
 * Simple stream with small always-floated thumbnails and title only
 */
.c-stream--imglist {

  .stream-preview-image,
  .c-stream__item__img {
    width: c-stream-property-get( imglist, img-size-sm );
    height: c-stream-property-get( imglist, img-size-sm );

    @media #{$medium-up} {
      width: c-stream-property-get( imglist, img-size-lg );
      height: c-stream-property-get( imglist, img-size-lg );
    }
  }

  .c-stream__item__img--placeholder {
    @include img-placeholder( c-stream-property-get( imglist, img-size-sm ) );

    @media #{$medium-up} {
      @include img-placeholder( c-stream-property-get( imglist, img-size-lg ) );
    }
  }


  .c-stream__item__body {}


  .c-item-title__title {
    font-size: c-stream-property-get( imglist, f-z-sm );

    @media #{$medium-up} {
      font-size: c-stream-property-get( imglist, f-z-lg );
    }
  }

  .c-item-title__link:not( .entity--promo ) {
    @include anchorage( '&' );
  }


  &.c-stream--sm {
    .c-stream__item {
      margin-top: halve( c-stream-property-get( item-spacing ) );
    }

    .stream-preview-image,
    .c-stream__item__img {
      width: c-stream-property-get( imglist, img-size-sm );
      height: c-stream-property-get( imglist, img-size-sm );
    }

    .c-stream__item__img--placeholder {
      @include img-placeholder( c-stream-property-get( imglist, img-size-sm ) );
    }

    .c-item-title__title {
      font-size: $paragraph-font-size;
    }
  }

}





//
// Entity Variations
// ==========================================================================


.entity--factcheck {
  .c-stream__item__img {
    max-width: c-stream-property-get( item-img-thumbnail-w );

    @media #{$small-only} {
      margin-left: auto;
      margin-right: auto;
    }
  }
}





//
// Size Variations
// ==========================================================================


.c-stream--sm {}

